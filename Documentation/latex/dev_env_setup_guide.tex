\documentclass[10pt,a4paper]{article}

\usepackage[utf8]{inputenc}

\usepackage[T1]{fontenc}

\frenchspacing{}

\usepackage[english, ngerman]{babel}
\usepackage{textcomp}

\usepackage{hyperref}


\usepackage{droid}

\usepackage[pdftex]{graphicx}

\usepackage[a4paper]{geometry}

\usepackage{setspace}
\setstretch{1.3}

\usepackage{xhfill}
\usepackage{nth}
\usepackage[labelfont=bf,figurename=Fig.,tablename=Tab.]{caption}


\definecolor{codeNote}{rgb}{0.0, 0.6, 0.0}
\definecolor{gray-5}{gray}{0.85}
\definecolor{orange}{rgb}{1.0, 0.27, 0}
\definecolor{blue}{rgb}{0.0, 0.0, 0.8}

\usepackage{multicol}

\usepackage[activate]{pdfcprot}
\usepackage{listings}
\lstset{breaklines=true} 
%\lstset{numbers=left, numberstyle=\scriptsize\ttfamily, numbersep=10pt, captionpos=b} 
\lstset{columns=flexible}
\lstset{backgroundcolor=\color{gray-5}}
\lstset{basicstyle=\small\ttfamily}
\lstset{framesep=4pt}
\lstset{upquote=true}
\lstset{inputencoding=utf8}
\lstset{escapeinside={\%*}{*)}}
\lstset{language=bash}
\lstset{commentstyle=\color{blue},}
\lstset{
    literate={~} {$\sim$}{1}
}

\begin{document}

%%%%%%%%%%%%%   COMMANDS   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\tip}{\rule{10pt}{10pt}\hspace{12pt}}

\newenvironment{command}[1]{\noindent\xrfill{2pt}[orange]\textcolor{orange}{\textbf{#1}}\xrfill{2pt}[orange]}{\noindent\xrfill{2pt}[orange]}

\newcommand{\codenote}[1]{\textcolor{codeNote}{#1}}
%%%%%%%%%%%%%   COMMANDS END   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	
\title{Development Environment Setup Guide}
\author{Market Logic Software AG}
\maketitle
\thispagestyle{empty}
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Preface}
This document lists the tasks of setting up a working development environment and
explains each step in detail. The setup was made with TODO:INSERT SPECS. The conventions of this document are listed below.

\begin{itemize}
\item{}Additional notes are presented as follows:

\tip{}This is an additional note or explanation.
\vspace{\baselineskip}


\item{}Commands are illustrated as follows:

\begin{command}{<filename>}
\begin{lstlisting}
# this is a comment
source code or command
\end{lstlisting}
\codenote{Additional information for source code or commands.}

\end{command}

Where \textit{<filename>} represents either the file in which the \textit{source code} must be added/changed, or a program window (i.e. TERMINAL or ECLIPSE) in which the \textit{command} must be executed.

\end{itemize}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Install operating system}
Install a unix based operating system. You will need a shell in order to execute the scripts listed below. Therefore, if you install a Windows OS, you will also need to install Cygwin. %TODO: Who will have a 64bit version available at all times, or where will it be available?

\vspace{\baselineskip}
\tip{}For consistency, your username should be the same as the acronym given to you. From now on \textit{<acronym>} refers to the three letter acronym and \textit{<username>} to the username in your OS environment. (Ideally, these are the same).

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Install JAVA 6 JDK 64bit version}
First download the JAVA JDK from Samba server WHERE????. %TODO: what version and where is the file? 
%download from: http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase6-419409.html   ???

Open up a terminal (\includegraphics[width=10pt]{consoleSymbol.png}) and enter the following commands: (TODO: UPDATE COMMANDS TO VERSION AND GENERIC FILENAME)

\begin{command}{TERMINAL}
\begin{lstlisting}
# wget http://download.oracle.com/otn-pub/java/jdk/6u43-b01/jdk-6u43-linux-x64.bin
chmod u+x jdk-6u43-linux-x64.bin
./jdk-6u43-linux-x64.bin
sudo mkdir -p /usr/lib/jvm
sudo mv jdk1.6.0_43 /usr/lib/jvm



sudo update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jdk1.6.0_43/bin/java" 1
sudo update-alternatives --install "/usr/bin/javac" "javac" "/usr/lib/jvm/jdk1.6.0_43/bin/javac" 1
sudo update-alternatives --install "/usr/lib/mozilla/plugins/libjavaplugin.so" "mozilla-javaplugin.so" "/usr/lib/jvm/jdk1.6.0_43/jre/lib/amd64/libnpjp2.so" 1
sudo update-alternatives --install "/usr/bin/javaws" "javaws" "/usr/lib/jvm/jdk1.6.0_43/jre/bin/javaws" 1
\end{lstlisting}

\noindent
\codenote{If any other java versions are already installed, select sun java as default:}

\begin{lstlisting}
sudo update-alternatives --config java 
sudo update-alternatives --config javac 
sudo update-alternatives --config mozilla-javaplugin.so 
sudo update-alternatives --config javaws
\end{lstlisting}
\end{command}

\vspace{\baselineskip}
\tip{}You should name your workspace \textit{workspace} in order to keep folder locations consistent with this guide. From now on \textit{<workspace>} refers to exactly that Eclipse workspace. 


\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Install PostgreSQL with required modules}
Install PostgreSQL with the following command:

\begin{command}{TERMINAL}
\begin{lstlisting}
sudo apt-get install postgresql postgresql-contrib
\end{lstlisting}

\noindent
\codenote{To restart PostgreSQL use:}
\begin{lstlisting}
sudo service postgresql restart
\end{lstlisting}
\end{command}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Arrange a SSH Key}
To get a new ssh key pair, you have two possibilities: (TODO: WHAT WILL BE THE STANDARD PROCEDURE HERE?)
\begin{enumerate}
\item{} If you know how to do it, create one yourself and send the public key to Sebastian.
\item{} Ask Sebastian to create one for you.
\end{enumerate}

\tip{}In order to contact Sebastian, either go to his office or write him at: \newline
\begin{center}
\href{mailto:sra@marketlogicsoftware.com}{sra@marketlogicsoftware.com}.
\end{center}

\vspace{\baselineskip}
\noindent
The next step is to change the ssh access rights to [rw- --- ---]:

\begin{command}{TERMINAL}
\begin{lstlisting}
chmod 600 <path_to_your_ssh_key_file>
\end{lstlisting}

\noindent
\codenote{(Optional:) The access rights of the current folders files can be checked with:}
\begin{lstlisting}
ls -l
\end{lstlisting}

\end{command}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Install Eclipse Kepler}
Get Eclipse Kepler (Version: Juno Kepler Release, Build id: 20130614-0229) from:
\newline
\href{smb://storage/development/environment/files/eclipse_kepler_with_jre.tar.gz}{smb://storage/development/environment/files/eclipse\_kepler\_with\_jre.tar.gz}

\vspace{\baselineskip}
\noindent
The following plug-ins are included in this Eclipse version:
\begin{table}[h!tp]
\begin{center}
\begin{tabular}{|l|l|} 

\hline
\textbf{Plug-in} & \textbf{Version} \\
\hline
\hline
Google Plug-in for Eclipse & 3.2.4.v201306061638-rel-r42  \\
Google Web Toolkit SDK & 2.5.1  \\
\hline
Eclipse Subversive - SVN Team Provider Project & 1.1.0.l20130527-1700  \\
Polarion Subversive 1.6 SVN Connector & 3.0.1.l20130301-1700  \\
SVNKit 1.3.8 Implementation & 3.0.1.l20130301-1700  \\
\hline
OpenArchitectureWare MDSD Framework & 4.3.1.20090107-2000PRD \\
\hline
Run Jetty Run Feature & 1.3.3.201203161919 \\
\hline
\end{tabular}
\end{center}
\end{table}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Initial checkout of buildcenter project}
Next, the buildcenter project needs to be downloaded in order to set up the development environment. It includes all necessary scripts. The easiest way to check out the buildcenter project is by using Eclipse:
\begin{enumerate}
 \item{}Move Eclipse Kepler installation with all required plugins from \textit{<kepler\_path>} to /usr/local/(eclipse\_kepler)
 \item{}Run Eclipse and checkout buildcenter project from:
\end{enumerate}

\begin{command}{ECLIPSE}

\noindent
\codenote{Go to Eclipse and import using SVN. Provide SSH key and Click OK. Do not enter a passphrase.} %TODO: specify (maybe format?)
\begin{lstlisting}
svn+ssh://<acronym>@devel.marketlogicsoftware.com/mls/trunk/buildcenter
\end{lstlisting}
\codenote{<acronym> is the three letter code of your e-mail address (i.e. xyz@marketlogicsoftware.com).}
\end{command}

\vspace{\baselineskip}

\begin{command}{TERMINAL}

\codenote{The easiest way to add devel.marketlogicsoftware.com to known\_hosts is to check out one of the smallest projects using a command line like:}
\begin{lstlisting}
svn co svn+ssh://<acronym>@devel.marketlogicsoftware.com/mls/trunk/appmodel 
\end{lstlisting}
\end{command}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Copy environment file and update it}
In this section the environment file needs to be edited in order to correctly set variables according to your local settings. Most of the environment variables are used for generating configuration files like database access data or SQL scripts. Since the locations are different for every user, you will have to edit these individually. You can complete this task in your terminal using \textit{vim}. If you haven't done this already, you should now install/update vim with the following commands:

\begin{command}{TERMINAL}
\begin{lstlisting}
sudo apt-get install vim

#update/upgrade your system with
sudo apt-get update
sudo apt-get upgrade
\end{lstlisting} %TODO: update necessary?
\end{command}

\vspace{\baselineskip}

\noindent
Next, copy the environment file from TODO: WHERE? and update it using vim:

\begin{command}{TERMINAL}
\begin{lstlisting}
vi /home/<username>/<workspace>/buildcenter/environment
\end{lstlisting}
\codenote{This opens up the vim text editor. You will find commented sections that you have to edit (see Fig.~\ref{fig:env}).} TODO: REDO SCREENSHOTS WITH ALL CHANGES THAT NEED TO BE MADE

\vspace{\baselineskip}

\noindent
\codenote{To edit the text, press the \textit{insert} key on your keyboard. Press \textit{Esc} to exit insert mode. You can type in various commands to i.e. save and quit or quit the editor without saving the file:}
\begin{lstlisting}
:q<Return> (quit without saving)
:q!<Return> (force quit)
:x<Return> or :wq<Return> (save and quit)
\end{lstlisting}
\end{command}

\vspace{\baselineskip}

\tip{}Refer to \href{http://www.cs.colostate.edu/helpdocs/vi.html}{http://www.cs.colostate.edu/helpdocs/vi.html} and \newline \href{http://www.radford.edu/~mhtay/CPSC120/VIM\_Editor\_Commands.htm}{http://www.radford.edu/~mhtay/CPSC120/VIM\_Editor\_Commands.htm} for more information about commands or type \verb+man vi+ in your terminal to open up the vim general commands manual.

\begin{figure}[h!tp]
\begin{center}

\includegraphics[width=\textwidth]{env.png}
%
\end{center}
%
% Caption
\caption{Edit environment. Again, <username> and <workspace> must be set to the actual username and workspace. \textit{JAVA\_OPTS} sets various jvm arguments, where \textit{MaxPermSize} sets the maximum size of the permanent space (the permanent space is where the class, methods, internalized strings, and similar objects used by the VM are stored and never deallocated). \textit{Xms} and \textit{Xmx} set the initial and maximum heap size respectively. The \textit{JBOSS\_JAVA\_OPTS} (in line 118) use these \textit{JAVA\_OPTS} as well. If needed and if there is enough hardware available, the maximum heap size should be changed to 8192m: \textit{export JBOSS\_JAVA\_OPTS="-XX:MaxPermSize=1024m -Xms256m -Xmx8192m"}.}
% Label
\label{fig:env}
%
\end{figure}

\vspace{\baselineskip}

\tip{}If you only use one working environment you should source the environment file. That way, you won't have to set it every time after opening a new terminal window. Refer to section~\ref{sec:sourcing} to see how it is done.

\newpage

After changing the environment file, you have to call the deployment configuration which generates configuration files:

\begin{command}{TERMINAL}

\noindent
\codenote{\textbf{Call that script after every change of the environment file to update the mentioned configuration files!}}
\begin{lstlisting}
/home/<username>/<workspace>/buildcenter/configure-deployment.sh
\end{lstlisting}
\end{command}



\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Edit build properties}
Copy ~/<workspace>/buildcenter/build.properties.toconfigure to build.properties:

\begin{command}{TERMINAL}

\noindent
\codenote{For copying you can use the \textit{cp} command:}
\begin{lstlisting}
cp ~/<workspace>/buildcenter/build.properties.toconfigure ~/<workspace>/buildcenter/build.properties
\end{lstlisting}
\end{command}

\vspace{\baselineskip}

\noindent
Next, you will need to edit the build properties in the following way:

\begin{command}{build.properties}
\begin{lstlisting}
svn.repository = svn+ssh://<acronym>@devel.marketlogicsoftware.com/mls/trunk
svn.user = <acronym>
svn.sshkey = /home/<username>/.ssh/<user-ssh-key>
\end{lstlisting}
\codenote{}
\end{command}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Update system files}
Update system files according to proper version and \underline{reboot}.
\begin{table}[h!tp]
\footnotesize
\begin{center}
\begin{tabular}{|l|l|} 

\hline
\textbf{Ubuntu 12\_10, PostgreSQL 9.1} & \textbf{File location} \\
\hline
\hline
/etc/security/limits.conf & \href{smb://storage/development/environment/12\_10/limits.conf}{smb://storage/development/environment/12\_10/limits.conf}  \\
\hline
/etc/sysctl.conf & \href{smb://storage/development/environment/12\_10/sysctl.conf}{smb://storage/development/environment/12\_10/sysctl.conf}  \\
\hline
/etc/postgresql/9.1/main/pg\_hba.conf & \href{smb://storage/development/environment/12\_10/pg\_hba.conf}{smb://storage/development/environment/12\_10/pg\_hba.conf}  \\
\hline
/etc/postgresql/9.1/main/postgresql.conf & \href{smb://storage/development/environment/12\_10/postgresql.conf}{smb://storage/development/environment/12\_10/postgresql.conf}  \\
\hline

\end{tabular}
\end{center}
%\caption[kurze Beschriftung]{lange Beschriftung}

%\label{tab:tabelle_1}
\end{table}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Initial setup and projects update}
Open up a new terminal window and run the following commands:

\begin{command}{TERMINAL}

\noindent
\codenote{With your first installation run the initial setup script for getting JBoss and Tomcat. Update all projects and use the cleanbuild script to compile projects.}
\begin{lstlisting}
initial-setup.sh
\end{lstlisting}

\noindent
\codenote{Before running update-projects, note that there is a way of permanently storing the plaintext passwords, so you won't have to allow temporairy storing each time. Refer to section~\ref{sec:storing} to get more information.}
\begin{lstlisting}
update-projects.sh
cleanbuild-projects.sh
\end{lstlisting}
\end{command}


\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Create and include database}
First, create a database:

\begin{command}{TERMINAL}
\begin{lstlisting}
dbCreate.sh
\end{lstlisting}
\end{command}

\noindent
Next, copy latest dev dump (or whatever mandator you are using) from smb://storage/dumps/ to local machine. 

\footnotesize
As an example (at the time of writing this document with wrigley as mandator):

Copy \href{smb://storage/dumps/backups-2013/month-11/WRIGLEY\_WRIGLEY\_2013-11-20-01-00\_patched.zip}{smb://storage/dumps/backups-2013/month-11/WRIGLEY\_WRIGLEY\_2013-11-20-01-00\_patched.zip} 

to /home/<username>/dumps.

\normalsize

\vspace{\baselineskip}

\tip{}If the dump file name is without the expression `patched' in the end, you should transform the dump to a more comfortable quality of data via: 

\footnotesize
\verb+/<workspace>/dump-transformer/target/jar/java -jar dump-transformer.jar <path_to_file>+. 
\normalsize

\noindent
As result, a patched import file is created and named with the expression `patched'.

\vspace{\baselineskip}

\tip{}For faster receiving of latest dumps from storage, refer to section~\ref{sec:autoDumps}.

\vspace{\baselineskip}

\noindent
Switch the variable of the hibernate config (\textit{hbm2ddl.sh}) to `create' as follows:

\begin{command}{TERMINAL}
\begin{lstlisting}
hbm2ddl.sh "create"
\end{lstlisting}
\codenote{Now, jboss can be started with:}
\begin{lstlisting}
jboss.sh start
\end{lstlisting}
\codenote{Note that jboss.sh start will start JBoss in another window (asynchronous mode). jboss.sh run will start JBoss in the same terminal (synchronous mode).}

\vspace{\baselineskip}

\noindent
\codenote{Import required db dump into database:}
\begin{lstlisting}
dump.sh -import <dev_name> <path_to_dump_file>
(With the example from above it would be:) dump.sh -i wrigley WRIGLEY_WRIGLEY_2013-11-13-01-00_patched.zip
\end{lstlisting}
\codenote{Switch back the variable so it will not recreate the database again:}
\begin{lstlisting}
hbm2ddl.sh ""
\end{lstlisting}
\codenote{Now your jboss should be running and ready.}

\end{command}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Jetty and Eclipse}
In order to get your development environment running correctly, you will need to follow these steps:
\begin{enumerate}
\item{}Generate Eclipse project files for all downloaded projects.

\begin{command}{TERMINAL}

\codenote{In <workspace>/buildcenter run:}
\begin{lstlisting}
ant gen-all-eclipse
\end{lstlisting}
\end{command}

\item{}Start Eclipse and import all required projects (see Fig.~\ref{fig:projects}) into Eclipse. \textit{File} $\rightarrow$ \textit{Import\ldots} $\rightarrow$ \textit{Existing Projects into Workspace} $\rightarrow$ set \textit{root directory} to /<username>/<workspace> $\rightarrow$ \textit{OK} $\rightarrow$ select:
\begin{itemize}
\item{}appmodel
\item{}appmodel.editor
\item{}appmodel.metamodel
\item{}backend
\item{}buildcenter
\item{}client2
\item{}exportimportdata
\item{}localization
\item{}mls-web
\item{}pmm-scripts
\item{}pmm-search
\item{}pmm-sso
\item{}share
\item{}sharedmetricmodels
\end{itemize}

$\rightarrow$ \textit{Finish}.

\begin{figure}[h!tp]
\begin{center}
%
\includegraphics{eclipseProjects.png}
%
\end{center}
%
% Caption
\caption{Eclipse projects.}
% Label
\label{fig:projects}
%
\end{figure}



\item{}Now you need to switch encoding of all projects to ISO-8859-1 instead of UTF-8: 

Go to \textit{Window} $\rightarrow$ \textit{Preferences} $\rightarrow$ \textit{General} $\rightarrow$ \textit{Workspace} and check in \textit{`Text file encoding'} \textit{Other} and select \textit{ISO-8859-1}. Click \textit{Apply} (see Fig.~\ref{fig:encoding}).

\begin{figure}[h!tp]
\begin{center}
%
\includegraphics[width=0.5\textwidth]{encoding.png}
%
\end{center}
%
% Caption
\caption{Change encoding.}
% Label
\label{fig:encoding}
%
\end{figure}

\item{}The next step is to export the \textit{appmodel.editor} plugin and restart Eclipse. In Eclipse right-click on \textit{appmodel.editor} $\rightarrow$ \textit{Export\ldots} $\rightarrow$ \textit{Deployable plug-ins and fragments} $\rightarrow$ \textit{Next} $\rightarrow$ check \textit{appmodel.editor} and \textit{appmodel.metamodel} $\rightarrow$ under \textit{Destination} set \textit{Directory} to your Eclipse installation path (should be /usr/local/eclipse\_kepler) $\rightarrow$ click \textit{Finish} (see Fig.~\ref{fig:exportAppmodel}). 

\begin{figure}[h!tp]
\begin{center}

\includegraphics[width=\textwidth]{exportApp.png}
%
\end{center}
%
% Caption
\caption{Export appmodel.editor.}
% Label
\label{fig:exportAppmodel}
%
\end{figure}

\item{}Clean all projects in Eclipse (see Fig.~\ref{fig:clean}). In Eclipse, go to \textit{Project} $\rightarrow$ \textit{Clean\ldots} and check \textit{Clean all projects}. Click \textit{OK}.

\begin{figure}[h!tp]
\begin{center}

\includegraphics[width=0.5\textwidth]{cleanAllProjects.png}
%
\end{center}
%
% Caption
\caption{Clean all projects.}
% Label
\label{fig:clean}
%
\end{figure}

\item{}Set gwt sdk lib location (you only have to do this once):

Copy from /buildcenter/project/thirdparty/gwt/gwt-servlet.jar to /mls-web/war/WEB-INF/lib/gwt-servlet.jar.

\item{}Run the application (and automatically create a mls-web start jetty shortcut in the toolbar under the Debug icon (\includegraphics[width=12pt]{debug.png})). In Eclipse right-click on \textit{mls-web} $\rightarrow$ \textit{Debug As\ldots} $\rightarrow$ \textit{Web Application}. The application should be up and running now. 

\end{enumerate}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Enabling Dev Mode}
As a Developer you now need to run the devMode.sh Skript.

\begin{command}{TERMINAL}

\noindent
\codenote{Go to /home/<username>/<workspace>/mls-web/ and run devMode.sh.}
\begin{lstlisting}
cd workspace/mls-web/
./devMode.sh
\end{lstlisting}

\noindent
\codenote{Type in the mandator, username and password (i.e.:)}
\begin{lstlisting}
wrigley
admin
<password>
\end{lstlisting}

\noindent
\codenote{Answer \textit{no} to both questions about \textit{auto authentication} and \textit{use push}. See Fig.~\ref{fig:devMode} for reference.}
\begin{lstlisting}
n
n
\end{lstlisting}

\noindent
\codenote{Now you can start the application without error after login.}

\end{command}

\begin{figure}[h!tp]
\begin{center}

\includegraphics[width=0.5\textwidth]{devMode.png}
%
\end{center}
%
% Caption
\caption{Execute devMode.sh.}
% Label
\label{fig:devMode}
%
\end{figure}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Additional info}
%TODO: update this to newer (stable gwt) version?
\subsection{Installing Firefox 19 (64 bit version)}

\begin{command}{TERMINAL}
\begin{lstlisting}
wget ftp://ftp.mozilla.org/pub/firefox/releases/19.0.2/linux-x86_64/en-US/firefox-19.0.2.tar.bz2
tar xvf ~/Downloads/firefox-19.0.2.tar.bz2 
sudo mv firefox /opt/firefox19
sudo ln -s /opt/firefox19/firefox /usr/bin/firefox19
\end{lstlisting}
\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Source environment file}\label{sec:sourcing}

This will source the environment file. It ensures that the variables set in \textit{environment} are globally visible throughout your terminal windows. After that you won't have to set these every time after opening new terminal window.

\begin{command}{TERMINAL}

\noindent
\codenote{Open up the \textit{.bashrc} in your home directory. Note that files beginning with a `.' are set to be invisible.}

\begin{lstlisting}
vim .bashrc
\end{lstlisting}

\noindent
\codenote{Now append the following code line at the end of the file and save.}

\begin{lstlisting}
. /home/<username>/<workspace>/buildcenter/environment
\end{lstlisting}

\noindent
\codenote{Note the space between the dot and the file path.}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Storing Plaintext-passwords for checkout (update-projects.sh)}\label{sec:storing}

This will store the plaintext-passwords as workaround for temporary storage.

\begin{command}{TERMINAL}

\noindent
\codenote{Open up a terminal and follow the instructions:}

\begin{lstlisting}
#make a new temporary folder
mkdir tmp

#change directory to this folder
cd tmp

#check out a small project, the settings will be set for all projects later
svn co svn+ssh://<acronym>@devel.marketlogicsoftware.com/mls/trunk/appmodel

#it will ask you whether you want to save the plain passwords. you answer with yes
y

#choose permanent
P
\end{lstlisting}

\noindent
\codenote{Now edit the servers file of subversion as follows:}

\begin{lstlisting}
#open up vi
vi ~/.subversion/servers

#in the third last row change the boolean value store-plaintext-passwords to yes
store-plaintext-passwords = yes

#save and quit
\end{lstlisting}

\noindent
\codenote{After that you can delete your tmp folder. From now on, when you check out, it won't ask you to store a fingerprint, etc.}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Getting latest dumps from storage}\label{sec:autoDumps}
For getting the latest dumps from storage, you can use the following instructions:

\begin{enumerate}
\item{} If you haven't already, create a new directory in your home directory called dumps.

\begin{command}{TERMINAL}

\codenote{In /home/<username> run:}
\begin{lstlisting}
mkdir dumps
\end{lstlisting}
\end{command}

\item{} Next, add the following lines to your \textit{.bashrc} above the environment file sourcing (see Fig.~\ref{fig:autoDump}):

\begin{command}{.bashrc}

\codenote{Add these lines using vim commands:}
\begin{lstlisting}
MONTH="$(date +%m)"
YEAR="$(date +%Y)"
alias %*째*)ls='smbclient  //storage/dumps/ -D backups-$YEAR/month-$MONTH ""-c "ls '
alias %*째*)d='smbclient  //storage/dumps/ -D backups-$YEAR/month-$MONTH "" -c "' 
\end{lstlisting}

\codenote{Save and quit the \textit{.bashrc} file.}

\end{command}

\item{} Now you can get new dumps with the following commands (see Fig.~\ref{fig:autoDumpCommands} as an example).

\begin{command}{TERMINAL}

\codenote{See all dumps of <mandator>:}
\begin{lstlisting}
%*째*)ls <mandator>*"
\end{lstlisting}

\codenote{And copy the dump to your local machine:}
\begin{lstlisting}
%*째*)d get <dump_file>"
\end{lstlisting}

\codenote{Note that since these scripts use the Terminals date, they only work properly if the Terminal was opened on the same day.}

\end{command}

\end{enumerate}

\begin{figure}[h!tp]
\begin{center}

\includegraphics[width=0.75\textwidth]{autoDump.png}
%
\end{center}
%
% Caption
\caption{Editing of \textit{.bashrc}.}
% Label
\label{fig:autoDump}
%
\end{figure}

\begin{figure}[h!tp]
\begin{center}

\includegraphics[width=\textwidth]{autoDumpCommands.png}
%
\end{center}
%
% Caption
\caption{Command example for getting new dumps.}
% Label
\label{fig:autoDumpCommands}
%
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Create an empty mandator}
To create an empty mandator you have to type in the following commands in a Terminal:

\begin{command}{TERMINAL}

\begin{lstlisting}
mandator.sh -create <name>
\end{lstlisting}

\noindent
\codenote{For all available actions on \textit{mandator.sh} call mandator.sh.}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Change password of login}
To change the password of login you have to type in the following commands in a Terminal:

\begin{command}{TERMINAL}

\begin{lstlisting}
account.sh -setpassword <mandator> <user> "<password>"
\end{lstlisting}

\noindent
\codenote{Convention directs that the password is set the following way: mls,XX\$Yok where the \nth{5} and \nth{6} characters of the login password (XX) are the first two letters of the mandator name, i.e. for \textit{DEV} mandator: mls,\textbf{de}\$Yok}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Delete and create database}
To reset the database call the following script:

\begin{command}{TERMINAL}

\begin{lstlisting}
dbReset.sh
\end{lstlisting}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Test SQL}
There is a SQL test script:

\begin{command}{TERMINAL}

\begin{lstlisting}
/backend-tests/pojoqueries.sql
\end{lstlisting}

\end{command}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Generated properties by configure-deployment.sh}
If you have problems with the deployment, check your deploy properties in:

\begin{command}{TERMINAL}

\begin{lstlisting}
deploy.properties
\end{lstlisting}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Input files for configuration files}
The input files for generation of configuration files based on environment variables can be found in:

\begin{command}{TERMINAL}

\begin{lstlisting}
*.in
\end{lstlisting}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Extracting JBoss and Tomcat}
To extract JBoss and Tomcat use:

\begin{command}{TERMINAL}

\begin{lstlisting}
setup.sh
\end{lstlisting}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Rebuild Tomcat configuration}
To rebuild the Tomcat configuration from *.in files use:

\begin{command}{TERMINAL}

\begin{lstlisting}
pmm-webserver-config/ant build.xml
\end{lstlisting}

\end{command}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Rebuild Lucene index}
To rebuild the index for Lucene search use:

\begin{command}{TERMINAL}

\begin{lstlisting}
index.sh
\end{lstlisting}

\end{command}


\subsection{More information}
For more information about what each script does, refer to:

\href{smb://storage/users/tha/documents/Scripting.doc}{smb://storage/users/tha/documents/Scripting.doc}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}

